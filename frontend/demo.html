<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo - SailMate</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="shortcut icon" href="/images/fav.png" type="image/png">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'docker-blue': '#0666D0',
                        'docker-light-blue': '#0B95E0',
                        'soft-gray': '#F9F9F9'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        .chat-bubble {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.5s ease-out forwards;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .typing-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #0666D0;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        
        .typewriter {
            overflow: hidden;
            border-right: 2px solid #0666D0;
            white-space: nowrap;
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #0666D0; }
        }
        
        .breathing-button {
            animation: breathe 2s ease-in-out infinite;
        }
        
        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* Mobile-specific optimizations */
        @media (max-width: 768px) {
            /* Better mobile touch targets */
            .mobile-touch-target {
                min-height: 48px;
                min-width: 48px;
            }
            
            /* Mobile button improvements */
            .mobile-btn {
                padding: 12px 24px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            /* Mobile chat optimizations */
            .mobile-chat-bubble {
                max-width: 85%;
            }
            
            /* Mobile input improvements */
            .mobile-input {
                font-size: 16px; /* Prevents zoom on iOS */
                border-radius: 12px;
            }
        }
        

    </style>
</head>
<body class="font-inter bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="index.html">
                        <img src="images/Logo.png" alt="SailMate" class="h-32 sm:h-36 md:h-40 w-auto">
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="text-gray-600 hover:text-docker-blue px-3 py-2 text-sm font-medium mobile-touch-target">‚Üê Back to Home</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Demo Header -->
    <div class="bg-white border-b border-gray-200">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
            <div class="text-center">
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-4">Try SailMate Demo</h1>
                <p class="text-base sm:text-lg text-gray-600">See how our AI assistant helps you make safer sailing decisions</p>
            </div>
        </div>
    </div>

    <!-- Demo Chat Interface -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <!-- Chat Header -->
            <div class="border-b border-gray-200 px-4 sm:px-6 py-4">
                <div class="flex items-center">
                    <div class="bg-docker-blue/10 rounded-full w-10 h-10 flex items-center justify-center mr-3 flex-shrink-0">
                        <svg class="w-6 h-6 text-docker-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-base sm:text-lg font-semibold text-gray-900">SailMate Assistant</h3>
                        <p class="text-xs sm:text-sm text-gray-500">Ask me about marine conditions and sailing safety</p>
                    </div>
                </div>
            </div>

            <!-- Chat Messages -->
            <div id="chat-messages" class="px-4 sm:px-6 py-4 space-y-4 min-h-80 sm:min-h-96 max-h-96 sm:max-h-[32rem] overflow-y-auto">
                <!-- Messages will be added here dynamically -->
            </div>

            <!-- Input Area -->
            <div class="border-t border-gray-200 px-4 sm:px-6 py-4">
                <div class="flex space-x-2 sm:space-x-3">
                    <input type="text" id="message-input" placeholder="Ask about marine conditions..."
                           class="flex-1 border border-gray-300 rounded-lg px-3 sm:px-4 py-2 sm:py-3 focus:outline-none focus:ring-2 focus:ring-docker-blue focus:border-transparent mobile-input text-sm sm:text-base">
                    <button id="send-button" class="bg-docker-blue text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-medium hover:bg-docker-light-blue transition-colors disabled:opacity-50 disabled:cursor-not-allowed mobile-btn mobile-touch-target text-sm sm:text-base">
                        <span class="button-label">Send</span>
                        <span class="button-spinner typing-indicator hidden ml-2" aria-hidden="true"></span>
                    </button>
                </div>
                <p class="text-xs text-gray-500 mt-2">This is a demo. In the real app, you can ask any sailing-related question!</p>
            </div>
        </div>

        <!-- Call to Action Section -->
        <div class="mt-6 sm:mt-8 bg-docker-blue rounded-lg shadow-sm">
            <div class="px-4 sm:px-6 py-6 sm:py-8 text-center">
                <h3 class="text-xl sm:text-2xl font-bold text-white mb-4">Want real forecasts?</h3>
                <p class="text-white/90 mb-6 text-base sm:text-lg">Try the full SailMate Assistant with real-time marine data</p>
                <a href="assistant.html" class="inline-flex items-center bg-white text-docker-blue px-6 sm:px-8 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors mobile-btn mobile-touch-target" id="cta-button">
                    <span class="text-sm sm:text-base">Try SailMate Assistant</span>
                    <svg class="w-4 sm:w-5 h-4 sm:h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                    </svg>
                </a>
            </div>
        </div>

        <!-- Demo Info -->
        <div class="mt-6 sm:mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6">
            <h3 class="text-base sm:text-lg font-semibold text-gray-900 mb-4">How This Works</h3>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6">
                <div class="text-center p-3 sm:p-0">
                    <div class="bg-docker-blue/10 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3">
                        <svg class="w-6 h-6 text-docker-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                        </svg>
                    </div>
                    <h4 class="font-medium text-gray-900 mb-2 text-sm sm:text-base">Ask Naturally</h4>
                    <p class="text-xs sm:text-sm text-gray-600">Ask questions in plain English about any location</p>
                </div>
                <div class="text-center p-3 sm:p-0">
                    <div class="bg-docker-blue/10 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3">
                        <svg class="w-6 h-6 text-docker-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                    </div>
                    <h4 class="font-medium text-gray-900 mb-2 text-sm sm:text-base">Real-Time Data</h4>
                    <p class="text-xs sm:text-sm text-gray-600">We fetch current weather and marine conditions</p>
                </div>
                <div class="text-center p-3 sm:p-0">
                    <div class="bg-docker-blue/10 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3">
                        <svg class="w-6 h-6 text-docker-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                        </svg>
                    </div>
                    <h4 class="font-medium text-gray-900 mb-2 text-sm sm:text-base">Smart Analysis</h4>
                    <p class="text-xs sm:text-sm text-gray-600">AI provides safety recommendations and insights</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Simple Footer for Demo Page -->
    <footer class="bg-gray-900 text-white py-6 px-4 sm:px-6 lg:px-8 mt-8">
        <div class="max-w-4xl mx-auto">
            <div class="text-center">
                <!-- Logo and Brand -->
                <div class="mb-4">
                    <img src="images/Logo.png" alt="SailMate" class="h-16 sm:h-20 w-auto mx-auto mb-3">
                    <p class="text-gray-300 text-sm sm:text-base max-w-md mx-auto">
                        Making sailing safer and smarter with AI-powered marine forecasts.
                    </p>
                </div>
                
                <!-- Navigation Links -->
                <div class="flex flex-wrap justify-center items-center gap-4 sm:gap-6 mb-4">
                    <a href="index.html" class="text-gray-300 hover:text-white transition-colors text-sm sm:text-base mobile-touch-target">
                        Home
                    </a>
                    <a href="assistant.html" class="text-gray-300 hover:text-white transition-colors text-sm sm:text-base mobile-touch-target">
                        Real Assistant
                    </a>
                    <a href="index.html#about" class="text-gray-300 hover:text-white transition-colors text-sm sm:text-base mobile-touch-target">
                        About
                    </a>
                    <a href="index.html#contact" class="text-gray-300 hover:text-white transition-colors text-sm sm:text-base mobile-touch-target">
                        Contact
                    </a>
                </div>
                
                <!-- Copyright -->
                <div class="border-t border-gray-800 pt-4">
                    <p class="text-gray-400 text-xs sm:text-sm">
                        &copy; 2025 SailMate. Built with ‚ù§Ô∏è for sailors everywhere.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        const chatMessages = document.getElementById('chat-messages');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const buttonLabel = document.querySelector('#send-button .button-label');
        const buttonSpinner = document.querySelector('#send-button .button-spinner');
        
        let demoStarted = false;
        let currentStep = 0;
        let isLoading = false;
        
        // Demo conversation data - will be populated from i18n
        let demoConversation = [];

        function createMessageElement(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-bubble';
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-2 sm:space-x-3 justify-end">
                        <div class="bg-docker-blue rounded-lg px-3 sm:px-4 py-2 sm:py-3 mobile-chat-bubble">
                            <p class="text-white text-sm sm:text-base">${message}</p>
                        </div>
                        <div class="bg-gray-300 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 sm:w-5 h-4 sm:h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-2 sm:space-x-3">
                        <div class="bg-docker-blue/10 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 sm:w-5 h-4 sm:h-5 text-docker-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                            </svg>
                        </div>
                        <div class="bg-gray-100 rounded-lg px-3 sm:px-4 py-2 sm:py-3 mobile-chat-bubble">
                            <div class="text-sm sm:text-base">${message}</div>
                        </div>
                    </div>
                `;
            }
            
            return messageDiv;
        }

        function addMessage(message, isUser = false) {
            const messageDiv = createMessageElement(message, isUser);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function createDemoResponse1() {
            return `<div class="space-y-3">
                <p class="text-gray-800 text-sm sm:text-base">Based on current marine data for Santa Cruz:</p>
                <div class="bg-white rounded-lg p-3 sm:p-4 border border-gray-200">
                    <div class="grid grid-cols-2 gap-3 sm:gap-4 text-xs sm:text-sm">
                        <div>
                            <span class="font-medium text-gray-700">üåä Wave Height:</span>
                            <span class="text-green-600 font-semibold"> 3-5 feet</span>
                        </div>
                        <div>
                            <span class="font-medium text-gray-700">üí® Wind Speed:</span>
                            <span class="text-blue-600 font-semibold"> 12-15 knots</span>
                        </div>
                        <div>
                            <span class="font-medium text-gray-700">üß≠ Wind Direction:</span>
                            <span class="text-blue-600 font-semibold"> NW</span>
                        </div>
                        <div>
                            <span class="font-medium text-gray-700">üö© Safety Level:</span>
                            <span class="text-green-600 font-semibold"> Safe</span>
                        </div>
                    </div>
                </div>
                <p class="text-gray-800 text-sm sm:text-base">Conditions are moderate for experienced sailors. Waves are manageable but be cautious of occasional larger sets. Wind is steady from the northwest. Consider checking tide times and bring appropriate safety gear.</p>
            </div>`;
        }

        function createDemoResponse2() {
            return `<div class="space-y-3">
                <p class="text-gray-800 text-sm sm:text-base">Tomorrow's forecast for Santa Cruz shows:</p>
                <div class="bg-white rounded-lg p-3 sm:p-4 border border-gray-200">
                    <div class="grid grid-cols-2 gap-3 sm:gap-4 text-xs sm:text-sm">
                        <div>
                            <span class="font-medium text-gray-700">üåä Wave Height:</span>
                            <span class="text-orange-600 font-semibold"> 6-8 feet</span>
                        </div>
                        <div>
                            <span class="font-medium text-gray-700">üí® Wind Speed:</span>
                            <span class="text-orange-600 font-semibold"> 18-22 knots</span>
                        </div>
                        <div>
                            <span class="font-medium text-gray-700">üß≠ Wind Direction:</span>
                            <span class="text-blue-600 font-semibold"> W</span>
                        </div>
                        <div>
                            <span class="font-medium text-gray-700">üö© Safety Level:</span>
                            <span class="text-orange-600 font-semibold"> Caution</span>
                        </div>
                    </div>
                </div>
                <p class="text-gray-800 text-sm sm:text-base">‚ö†Ô∏è <strong>Exercise caution tomorrow.</strong> Larger waves and stronger winds expected. Only recommended for experienced sailors with proper safety equipment. Consider postponing if you're less experienced.</p>
            </div>`;
        }

        function startDemo() {
            if (demoStarted) return;
            demoStarted = true;
            
            // Set up demo conversation directly
            demoConversation = [
                {
                    type: 'assistant',
                    content: 'Hi! I\'m your sailing safety assistant. Ask me about marine conditions, wave heights, wind forecasts, or any sailing-related questions. For example, try asking "How are the waves near Santa Cruz today?"',
                    delay: 200
                },
                {
                    type: 'user',
                    content: 'How are the waves near Santa Cruz today?',
                    delay: 2000
                },
                {
                    type: 'assistant',
                    content: createDemoResponse1(),
                    delay: 3000
                },
                {
                    type: 'user',
                    content: 'What about tomorrow\'s forecast?',
                    delay: 2000
                },
                {
                    type: 'assistant',
                    content: createDemoResponse2(),
                    delay: 3000
                }
            ];
            playDemo();
            
            function playDemo() {
                function playNextStep() {
                    if (currentStep >= demoConversation.length) {
                        // Demo finished, enable input
                        messageInput.disabled = false;
                        sendButton.disabled = false;
                        
                        // Scroll to call-to-action
                        setTimeout(() => {
                            const ctaSection = document.querySelector('.bg-docker-blue');
                            if (ctaSection) {
                                ctaSection.scrollIntoView({ behavior: 'smooth' });
                            }
                        }, 1000);
                        
                        return;
                    }
                    
                    const step = demoConversation[currentStep];
                    const messageDiv = createMessageElement(step.content, step.type === 'user');
                    
                    // Add message with fade-in animation
                    chatMessages.appendChild(messageDiv);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    currentStep++;
                    
                    // Schedule next step
                    setTimeout(playNextStep, step.delay);
                }
                
                // Start the demo after a short delay
                setTimeout(playNextStep, 1000);
            }

        }

        // Start demo when page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Start breathing animation immediately
            const ctaButton = document.getElementById('cta-button');
            if (ctaButton) {
                ctaButton.classList.add('breathing-button');
            }
            
            // Disable input during demo
            messageInput.disabled = true;
            sendButton.disabled = true;
            
            // Start demo after a short delay
            setTimeout(startDemo, 100);
        });

        // Handle manual message sending after demo
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message || isLoading) return;

            isLoading = true;
            messageInput.disabled = true;
            sendButton.disabled = true;
            if (buttonSpinner) buttonSpinner.classList.remove('hidden');
            messageInput.classList.add('opacity-50');

            addMessage(message, true);
            messageInput.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const fallbackMessage = "This is a demo! In the real SailMate app, I would analyze real-time marine data and provide detailed safety recommendations for your location. Try the full version at /ask to get actual forecasts and sailing advice.";
                addMessage(fallbackMessage);

                isLoading = false;
                messageInput.disabled = false;
                sendButton.disabled = false;
                if (buttonSpinner) buttonSpinner.classList.add('hidden');
                messageInput.classList.remove('opacity-50');
                messageInput.focus();
            }, 1000);
        }

        sendButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !isLoading) {
                e.preventDefault();
                sendMessage();
            }
        });
    </script>
    <!-- Toast/Snackbar Container -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2 pointer-events-none">
        <!-- Toast messages will be dynamically inserted here -->
    </div>

    <script>
        // Toast/Snackbar System
        class ToastManager {
            constructor() {
                this.container = document.getElementById('toast-container');
                this.toasts = [];
            }

            show(message, type = 'error', duration = 5000) {
                const toast = this.createToast(message, type);
                this.container.appendChild(toast);
                this.toasts.push(toast);

                // Animate in
                setTimeout(() => {
                    toast.classList.add('translate-x-0', 'opacity-100');
                }, 10);

                // Auto remove
                setTimeout(() => {
                    this.remove(toast);
                }, duration);

                return toast;
            }

            createToast(message, type) {
                const toast = document.createElement('div');
                const bgColor = type === 'error' ? 'bg-red-500' : 
                               type === 'success' ? 'bg-green-500' : 
                               type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500';
                
                const icon = type === 'error' ? '‚ùå' : 
                            type === 'success' ? '‚úÖ' : 
                            type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';

                toast.className = `
                    ${bgColor} text-white px-4 py-3 rounded-lg shadow-lg 
                    transform translate-x-full opacity-0 transition-all duration-300 ease-out
                    max-w-sm pointer-events-auto
                    flex items-center space-x-3
                `;
                
                toast.innerHTML = `
                    <span class="text-lg">${icon}</span>
                    <span class="flex-1 text-sm font-medium">${message}</span>
                    <button onclick="toastManager.remove(this.parentElement)" 
                            class="text-white/80 hover:text-white transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                `;

                return toast;
            }

            remove(toast) {
                if (!toast) return;
                
                toast.classList.remove('translate-x-0', 'opacity-100');
                toast.classList.add('translate-x-full', 'opacity-0');
                
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                    this.toasts = this.toasts.filter(t => t !== toast);
                }, 300);
            }

            clear() {
                this.toasts.forEach(toast => this.remove(toast));
            }
        }

        // Initialize toast manager
        const toastManager = new ToastManager();
        window.toastManager = toastManager;

        // Global error handler for fetch requests
        window.addEventListener('unhandledrejection', (event) => {
            console.error('Unhandled promise rejection:', event.reason);
            toastManager.show('Network error occurred. Please check your connection and try again.', 'error');
        });

        // Enhanced fetch wrapper with toast notifications for demo page
        window.safeFetch = async (url, options = {}) => {
            try {
                const response = await fetch(url, options);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                return response;
            } catch (error) {
                console.error('Fetch error:', error);
                
                let errorMessage = 'An error occurred while fetching data.';
                
                if (error.name === 'TypeError' && error.message.includes('fetch')) {
                    errorMessage = 'Network error. Please check your internet connection.';
                } else if (error.message.includes('HTTP error')) {
                    errorMessage = 'Server error. Please try again later.';
                }
                
                toastManager.show(errorMessage, 'error');
                throw error;
            }
        };
    </script>

</body>
</html> 